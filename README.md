# tracky-searches-Yii <img width="26" height="26" src="https://tracky-searches.ru/images/logo_img.png">

<img src="https://s23.postimg.org/l3e6vcxob/tracky_preview.png">
Репозиторий веб-сайта [tracky-searches.ru](https://tracky-searches.ru/)

### О приложении
Данный проект представляет из себя сервис по отслеживанию посылок.

Приложение поделено на 4 основных модуля:
* admin - модуль, реализующий панель администратора
* auth - модуль, реализующий функционал регистрации и авторизации, также функционал восстановления пароля
* tracking - модуль, реализующий функционал отслеживания почтовых отправлений и онлайн-чат
* user - модуль, реализующий раздел профиля пользователя

### Настройка

##### |Composer

Перед началом работы с проектом требуется установить дополнительные модули:
```sh
$ composer install
```
Все требуемые компоненты и зависимости будут загружены в директорию *vendor*

##### |SwiftMailer

Для работы функционала, требующего отправку e-mail сообщений требуется произвести настройку SMTP

Для этого в файле конфигурации `config/email_data.php` произведите настройки в соответствии с вашим почтовым клиентом:
```php
return [
    'class' => 'Swift_SmtpTransport',
    'host' => 'smtp.mail.ru',
    'username' => 'email@mail.ru',
    'password' => 'email-passsword',
    'port' => '465',
    'encryption' => 'ssl',
];
```

В контроллере авторизации `modules/auth/controllers/AuthorizationController.php` следует заменить значение отправителя:
```php
->setFrom('email@mail.ru')
```

В модели формы ввода почтового адреса `modules/auth/models/PasswordResetRequestForm.php` следует заменить такое-же значение:
```php
->setFrom('email@mail.ru')
```
*Подробнее о работе SwiftMailer можно узнать в [официальной документации](http://swiftmailer.org/docs/introduction.html) плагина.*

##### |База Данных
Настройка подключения к вашей базе данных производится в файле конфигурации `config/db.php`

После настройки подключения для воссоздания требуемой структуры таблиц проекта следует применить миграцию:
```sh
$ php yii migrate
```

##### |Определение администратора
Для того, чтобы дать пользователю роль администратора в приложении - нужно определить его с помощью id в `rbac/assignments.php`
```php
return [
    1 => [
        'admin',
    ],
];
```

> Данный проект разрабатывался в качестве курсового проекта **СПБКТ**
